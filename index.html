<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Liste de PrÃ©sence UCAO-ThÃ©atre</title>

  <!-- ICÃ”NES -->
  <link rel="icon" href="icons/icon-192.png" type="image/png">
  <link rel="apple-touch-icon" href="icons/icon-512.png">

  <!-- MANIFEST -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2ecc71">

  <!-- PWA / Mobile tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="UCAO-ThÃ©Ã¢tre">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="icons/icon-512.png">
  <link rel="icon" sizes="192x192" href="icons/icon-192.png">
  <meta name="msapplication-TileColor" content="#2ecc71">

  <!-- STYLE CSS (cache-busted) -->
  <link rel="stylesheet" href="style.css?v=2">
</head>
<body>

  <!-- SPLASH -->
  <div id="splash" class="splash">
    <img src="icons/icon-512.png" alt="Logo" class="splash-logo">
    <h1>Liste de PrÃ©sence UCAO-ThÃ©atre</h1>
    <p>Chargement...</p>
  </div>

  <!-- NOTIFICATION BANNER -->
  <div id="banner" class="banner hidden" aria-live="polite" role="status"></div>

  <!-- TOPBAR -->
  <header class="topbar">
    <h2>ğŸ“‹ Liste de PrÃ©sence UCAO-ThÃ©atre</h2>

    <div class="topbar-buttons">
      <button id="themeBtn" class="btn btn-secondary">ğŸŒ™</button>
      <button id="installBtn" class="btn btn-primary hidden">â¬‡ Installer</button>
      <button id="downloadBtn" class="btn btn-primary">â¬‡ Export</button>
    </div>
  </header>

  <!-- ADMIN CODE -->
  <div class="code-container">
    <h3>DÃ©finir / Modifier le code secret</h3>

    <form onsubmit="saveSecretCode(); return false;">
  <div class="input-wrapper">
    <input id="secretCode" type="password" placeholder="Entrez le code secret">
    <button type="button" class="btn btn-secondary" onclick="toggleVisibility('secretCode')">ğŸ‘ï¸</button>
  </div>

  <button class="btn btn-primary" type="submit">Enregistrer</button>
</form>


    <hr>

    <h3>VÃ©rifier un code</h3>
    <form onsubmit="checkCode(); return false;">
  <div class="input-wrapper">
    <input id="codeToCheck" type="password" placeholder="Entrez un code">
    <button type="button" class="btn btn-secondary" onclick="toggleVisibility('codeToCheck')">ğŸ‘ï¸</button>
  </div>

  <button class="btn btn-primary" type="submit">VÃ©rifier</button>
</form>

  <!-- RESPONSABLE -->
  <section class="login">
  <form onsubmit="return false;">
    <input type="password" id="password" placeholder="Mot de passe Responsable">
  </form>
</section>


  <!-- MEMBRES -->
  <main id="members"></main>

  <!-- FOOTER -->
  <!-- PAGES (navigation fixe en bas) with actions -->
    <div class="pages-menu bottom-pages">
    <div class="left-actions">
      <button id="addMember" type="button" class="btn btn-warning" aria-label="Ajouter un membre" title="Ajouter un membre">+ Ajouter un membre</button>
      <button id="resetData" type="button" class="btn btn-success" aria-label="RÃ©initialiser la page" title="RÃ©initialiser la page">RÃ©initialiser</button>
    </div>
    <div class="page-nav">
      <button id="prevPageBtn" type="button" class="btn btn-secondary" aria-label="Page prÃ©cÃ©dente" title="Page prÃ©cÃ©dente" onclick="changePage(-1)">â¬… Page prÃ©cÃ©dente</button>
      <select id="pageSelector" onchange="jumpToPage(this.value)" aria-label="SÃ©lection de la page"></select>
      <span id="pageLabel" aria-hidden="true">Page 1</span>
      <button id="nextPageBtn" type="button" class="btn btn-secondary" aria-label="Page suivante" title="Page suivante" onclick="changePage(1)">Page suivante â¡</button>
    </div>
  </div>

  <!-- MODAL -->
  <div id="modalAdd" class="modal hidden">
    <div class="modal-card">
      <h3>Ajouter un membre</h3>
      <input id="newName" placeholder="Nom & PrÃ©nom">
      <div class="modal-actions">
        <button id="saveNew" class="btn">Enregistrer</button>
        <button id="cancelNew" class="btn btn-danger">Annuler</button>
      </div>
    </div>
  </div>

  <!-- CONFIRM DELETE MODAL -->
  <div id="modalConfirm" class="modal hidden">
    <div class="modal-card">
      <h3 id="confirmTitle">Confirmer la suppression</h3>
      <p id="confirmMessage">Voulez-vous vraiment supprimer ce membre ?</p>
      <div class="modal-actions">
        <button id="confirmYes" class="btn btn-danger">Supprimer</button>
        <button id="confirmNo" class="btn">Annuler</button>
      </div>
    </div>
  </div>

  <!-- INSTALL HELP MODAL -->
  <div id="installHelp" class="modal hidden">
    <div class="modal-card">
      <h3>Installer l'application</h3>
      <p id="installHelpText">Votre navigateur n'a pas fourni le dialogue d'installation (le prompt). Pour installer l'applicationÂ : servez-la via <strong>localhost</strong> ou sur un site <strong>HTTPS</strong>. Voici quelques commandes utiles pour tester localement :</p>
      <pre id="installCmds" style="background:#f3f3f3;padding:8px;border-radius:6px;overflow:auto;max-height:140px"># Node (http-server)
npx http-server -c-1 -p 8080

# Python 3
python -m http.server 8000

# Pour vÃ©rifier le service worker et le manifest, ouvrez DevTools â†’ Application
</pre>
      <div class="modal-actions">
        <button id="copyInstallCmds" class="btn">Copier les commandes</button>
        <button id="closeInstallHelp" class="btn btn-danger">Fermer</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="app.js?v=2"></script>
  <script>
    window.addEventListener('load', () => {
      setTimeout(() => document.getElementById('splash').classList.add('hidden'), 800);
    });

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js?v=2')
        .then(() => console.log('Service Worker actif'));
    }
  </script>

</body>
</html>
